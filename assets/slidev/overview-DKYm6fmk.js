import{d as te,e as oe,_ as ne,f as le,g as se}from"../modules/unplugin-icons-DU7y6dj3.js";import{d as G,a8 as ie,a9 as ae,t as T,aa as ce,E as L,D as re,a1 as de,n as J,B as c,o as i,c as x,i as y,h as A,ab as ue,ac as me,b as g,j as pe,K as ve,z as K,ad as fe,e as a,F as P,ae as U,k as B,g as I,x as b,l as k}from"../modules/vue-BEAdwd-K.js";import{_ as Q,u as he,a as ke,s as ge,c as _e,C as O,i as be,b as R,t as xe,g as q}from"../index-CXqmis6x.js";import{u as we,S as ye,D as Ce,a as De}from"./DrawingPreview-DP9KbOTR.js";import{I as W}from"./IconButton-BcNpvClS.js";import{N as $e}from"./NoteDisplay-DWnAymS7.js";import{C as Ee}from"./ClicksSlider-BsFu9EyL.js";import"../modules/shiki-_vZ-7eQB.js";const Se=["placeholder"],Ne=G({__name:"NoteEditable",props:{no:{type:Number,required:!0},class:{default:""},editing:{default:!1},style:{default:()=>({})},placeholder:{default:"No notes for this slide"},clicksContext:{type:Object},autoHeight:{default:!1}},emits:["update:editing","markerDblclick","markerClick"],setup(w,{emit:z}){const l=w,_=z,u=ie(l,"editing",_,{passive:!0}),{info:v,update:C}=we(ae(l,"no")),f=T("");let D;const{ignoreUpdates:$}=ce(f,m=>{if(!u.value)return;const r=l.no;clearTimeout(D),D=setTimeout(()=>{C({note:m},r)},500)});L(()=>{var m;return(m=v.value)==null?void 0:m.note},(m="")=>{u.value||(clearTimeout(D),$(()=>{f.value=m}))},{immediate:!0,flush:"sync"});const s=T(),E=T();re(()=>{var m;u.value&&((m=s.value)==null||m.focus())}),de(s,()=>{u.value=!1});function j(){!l.autoHeight||!s.value||!u.value||s.value.scrollHeight>s.value.clientHeight&&(s.value.style.height=`${s.value.scrollHeight}px`)}return L([f,u],()=>{J(()=>{j()})},{flush:"post",immediate:!0}),(m,r)=>{var S;return c(u)?ue((i(),g("textarea",{key:1,ref_key:"inputEl",ref:s,"onUpdate:modelValue":r[2]||(r[2]=h=>f.value=h),class:y(["prose resize-none overflow-auto outline-none bg-transparent block border-primary border-2",l.class]),style:A([{"line-height":"1.75"},[l.style,E.value!=null?{height:`${E.value}px`}:{}]]),placeholder:w.placeholder,onKeydown:r[3]||(r[3]=pe(h=>u.value=!1,["esc"]))},null,46,Se)),[[me,f.value]]):(i(),x($e,{key:0,class:y(["border-transparent border-2",[l.class,f.value?"":"opacity-25 italic select-none"]]),style:A(l.style),note:f.value||w.placeholder,"note-html":(S=c(v))==null?void 0:S.noteHTML,"clicks-context":w.clicksContext,"auto-scroll":!w.autoHeight,onMarkerClick:r[0]||(r[0]=(h,N)=>_("markerClick",h,N)),onMarkerDblclick:r[1]||(r[1]=(h,N)=>_("markerDblclick",h,N))},null,8,["class","style","note","note-html","clicks-context","auto-scroll"]))}}}),Me=Q(Ne,[["__file","/home/js/Downloads/sli.dev/indrct/node_modules/@slidev/client/internals/NoteEditable.vue"]]),He={class:"h-screen w-screen of-hidden flex"},Be={class:"grid grid-rows-[auto_max-content] border-r border-main select-none max-h-full h-full"},Ie={class:"relative"},Te={class:"absolute left-0 top-0 bottom-0 w-200 flex flex-col flex-auto items-end group p2 gap-1 max-h-full of-x-visible of-y-auto",style:{direction:"rtl"}},Ve=["onClick"],We={p2:"",border:"t main"},ze={class:"select-none w-13 text-right my4 flex flex-col gap-1 items-end"},je={class:"text-3xl op20 mb2"},Ke={class:"flex flex-col gap-2 my5"},Oe=["onDblclick"],Ae={class:"py3 mt-0.5 mr--8 ml--4 op0 transition group-hover:op100"},Fe={key:0,class:"select-none absolute bottom-0 right-0 bg-main rounded-tl p2 op35 text-xs"},Le={class:"absolute top-0 right-0 px3 py1.5 border-b border-l rounded-lb bg-main border-main select-none"},Pe={class:"text-xs op50"},X=450,Ue=G({__name:"overview",setup(w){he({title:`Overview - ${ge}`});const{openInEditor:z,slides:l}=ke(),_=ve(new Map),u=T([]),v=T(null),C=K(()=>l.value.map(t=>{var e,n;return j(((n=(e=t.meta)==null?void 0:e.slide)==null?void 0:n.note)||"")})),f=K(()=>C.value.reduce((t,e)=>t+e,0)),D=K(()=>l.value.map(t=>E(t)).reduce((t,e)=>t+e,0)),$=new WeakMap;function s(t){return $.has(t)||$.set(t,_e(t,O)),$.get(t)}function E(t){var e,n;return((e=t.meta)==null?void 0:e.clicks)||((n=s(t))==null?void 0:n.total)}function j(t){var e;return((e=t.match(/[\w’'-]+/g))==null?void 0:e.length)||0}function m(t){const e=t.getBoundingClientRect(),n=20;return e.top>=0-n&&e.left>=0-n&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)+n&&e.right<=(window.innerWidth||document.documentElement.clientWidth)+n}function r(){const t=[];Array.from(_.entries()).forEach(([e,n])=>{m(n)&&t.push(e)}),u.value=t}function S(t){const e=document.createElement("a");e.target="_blank",e.href=t,e.click()}function h(t){const e=_.get(t);e&&e.scrollIntoView({behavior:"smooth",block:"start"})}function N(t,e,n){const M=s(n);M.current===e?M.current=O:M.current=e,t.preventDefault()}return fe(()=>{J(()=>{r()})}),(t,e)=>{const n=te,M=oe,Y=ne,Z=le,ee=se;return i(),g("div",He,[a("nav",Be,[a("div",Ie,[a("div",Te,[(i(!0),g(P,null,U(c(l),(o,p)=>{var H,d,V,F;return i(),g("div",{key:o.no,class:"relative",style:{direction:"ltr"}},[a("button",{class:y(["relative transition duration-300 w-8 h-8 rounded hover:bg-active hover:op100",u.value.includes(p)?"op100 text-primary bg-gray:5":"op20"]),onClick:Re=>h(p)},[a("div",null,b(p+1),1)],10,Ve),(d=(H=o.meta)==null?void 0:H.slide)!=null&&d.title?(i(),g("div",{key:0,class:y(["pointer-events-none select-none absolute left-110% backdrop-blur-8 top-50% translate-y--50% ws-nowrap z-10 px2 shadow-xl rounded border border-main transition duration-400 op0 group-hover:op100",u.value.includes(p)?"text-primary":"text-main important-text-op-50"])},b((F=(V=o.meta)==null?void 0:V.slide)==null?void 0:F.title),3)):I("v-if",!0)])}),128))])]),a("div",We,[c(be)?I("v-if",!0):(i(),x(W,{key:0,title:c(R)?"Switch to light mode theme":"Switch to dark mode theme",onClick:e[0]||(e[0]=o=>c(xe)())},{default:B(()=>[c(R)?(i(),x(n,{key:0})):(i(),x(M,{key:1}))]),_:1},8,["title"]))])]),a("main",{class:"flex-1 h-full of-auto",style:A(`grid-template-columns: repeat(auto-fit,minmax(${X}px,1fr))`),onScroll:r},[(i(!0),g(P,null,U(c(l),(o,p)=>{var H;return i(),g("div",{key:o.no,ref_for:!0,ref:d=>_.set(p,d),class:y(["relative border-t border-main of-hidden flex gap-4 min-h-50 group",p===0?"pt5":""])},[a("div",ze,[a("div",je,b(p+1),1),k(W,{class:"mr--3 op0 group-hover:op80",title:"Play in new tab",onClick:d=>S(c(q)(o,!1))},{default:B(()=>[k(Y)]),_:2},1032,["onClick"]),(H=o.meta)!=null&&H.slide?(i(),x(W,{key:0,class:"mr--3 op0 group-hover:op80",title:"Open in editor",onClick:d=>c(z)(`${o.meta.slide.filepath}:${o.meta.slide.start}`)},{default:B(()=>[k(Z)]),_:2},1032,["onClick"])):I("v-if",!0)]),a("div",Ke,[a("div",{class:"border rounded border-main overflow-hidden bg-main select-none h-max",onDblclick:d=>S(c(q)(o,!1))},[(i(),x(De,{key:o.no,width:X,class:"pointer-events-none important:[&_*]:select-none"},{default:B(()=>[k(ye,{"clicks-context":s(o),route:o,"render-context":"overview"},null,8,["clicks-context","route"]),k(Ce,{page:o.no},null,8,["page"])]),_:2},1024))],40,Oe),E(o)?(i(),x(Ee,{key:0,"clicks-context":s(o),class:"w-full mt-2",onDblclick:d=>s(o).current=c(O)},null,8,["clicks-context","onDblclick"])):I("v-if",!0)]),a("div",Ae,[k(W,{title:"Edit Note",class:y(["rounded-full w-9 h-9 text-sm",v.value===o.no?"important:op0":""]),onClick:d=>v.value=o.no},{default:B(()=>[k(ee)]),_:2},1032,["class","onClick"])]),k(Me,{no:o.no,class:"max-w-250 w-250 text-lg rounded p3","auto-height":!0,editing:v.value===o.no,"clicks-context":s(o),onDblclick:d=>v.value!==o.no?v.value=o.no:null,"onUpdate:editing":e[1]||(e[1]=d=>v.value=null),onMarkerClick:(d,V)=>N(d,V,o)},null,8,["no","editing","clicks-context","onDblclick","onMarkerClick"]),C.value[p]>0?(i(),g("div",Fe,b(C.value[p])+" words ",1)):I("v-if",!0)],2)}),128))],36),a("div",Le,[a("div",Pe,b(c(l).length)+" slides · "+b(D.value+c(l).length-1)+" clicks · "+b(f.value)+" words ",1)])])}}}),tt=Q(Ue,[["__file","/home/js/Downloads/sli.dev/indrct/node_modules/@slidev/client/pages/overview.vue"]]);export{tt as default};
